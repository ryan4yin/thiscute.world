<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>OS as Code - My Experience of NixOS - This Cute World</title><meta name=Description content="This Cute World"><meta property="og:url" content="https://thiscute.world/en/posts/my-experience-of-nixos/"><meta property="og:site_name" content="This Cute World"><meta property="og:title" content="OS as Code - My Experience of NixOS"><meta property="og:description" content="It’s February 2024, exactly 10 months since I started using NixOS. The beginner notes I wrote initially have received a lot of positive feedback and some sponsorships, becoming one of the most popular entry-level tutorials in the entire community. Since I created a dedicated GitHub repository and a separate documentation site for it in June 2023, it has garnered 1189 stars, and besides me, 37 other readers have submitted PRs:"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-21T16:26:21+08:00"><meta property="article:modified_time" content="2024-02-21T16:26:21+08:00"><meta property="article:tag" content="NixOS"><meta property="article:tag" content="Nix"><meta property="article:tag" content="Flakes"><meta property="article:tag" content="Linux"><meta property="article:tag" content="DevOps"><meta property="og:image" content="https://thiscute.world/posts/my-experience-of-nixos/nixos-and-flakes-book-202402.webp"><meta property="og:see_also" content="https://thiscute.world/en/posts/nixos-and-flake-basics/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://thiscute.world/posts/my-experience-of-nixos/nixos-and-flakes-book-202402.webp"><meta name=twitter:title content="OS as Code - My Experience of NixOS"><meta name=twitter:description content="It’s February 2024, exactly 10 months since I started using NixOS. The beginner notes I wrote initially have received a lot of positive feedback and some sponsorships, becoming one of the most popular entry-level tutorials in the entire community. Since I created a dedicated GitHub repository and a separate documentation site for it in June 2023, it has garnered 1189 stars, and besides me, 37 other readers have submitted PRs:"><meta name=twitter:site content="@ryan4yin"><meta name=application-name content="This Cute World"><meta name=apple-mobile-web-app-title content="This Cute World"><meta name=theme-color content="#f8f8f8"><meta name=twitter:creator content="@ryan4yin"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=canonical href=https://thiscute.world/en/posts/my-experience-of-nixos/><link rel=prev href=https://thiscute.world/en/posts/why-i-choose-niche-products/><link rel=next href=https://thiscute.world/en/posts/kubecon-china-2024/><link rel=stylesheet href=/css/main.min.css><link rel=stylesheet href=/css/style.min.css><meta name=google-site-verification content="E8bpp1lVVlb9YnSJcUzPL1dLAG17Nl_sp5Ru9a8tUDQ"><meta name=baidu-site-verification content="code-ZZtDruAnX1"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"OS as Code - My Experience of NixOS","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https://thiscute.world/en/posts/my-experience-of-nixos/"},"image":[{"@type":"ImageObject","url":"https://thiscute.world/posts/my-experience-of-nixos/nixos-and-flakes-book-202402.webp","width":2614,"height":1216}],"genre":"posts","keywords":["NixOS","Nix","Flakes","Linux","DevOps"],"wordcount":4005,"url":"https://thiscute.world/en/posts/my-experience-of-nixos/","datePublished":"2024-02-21T16:26:21+08:00","dateModified":"2024-02-21T16:26:21+08:00","publisher":{"@type":"Organization","name":"ryan4yin","logo":"https://thiscute.world/avatar/myself.png"},"author":[{"@type":"Person","name":"Ryan Yin","url":null}],"description":""}</script></head><body data-instant-intensity=viewport class="tw-flex tw-min-h-screen tw-flex-col"><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.className=e,document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),e==="light"?document.documentElement.classList.remove("tw-dark"):document.documentElement.classList.add("tw-dark"),window.theme=e,window.isDark=window.theme!=="light"}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#161b22"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")],window.switchThemeEventSet=new Set</script><div id=back-to-top></div><div id=mask></div><header class="desktop print:!tw-hidden" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/en/ title="This Cute World"><span id=desktop-header-typeit class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/en/series/>Series </a><a class=menu-item href=/en/posts/>Posts </a><a class=menu-item href=/en/categories/tech/>Tech </a><a class=menu-item href=/en/categories/life/>Life </a><a class=menu-item href=/en/tags/>Tags </a><a class=menu-item href=/en/now/>Now </a><a class=menu-item href=/en/about/>About </a><span class="menu-item delimiter"></span><button class="menu-item language" aria-label="Select Language">English<svg class="icon" viewBox="0 0 320 512"><path d="M285.476 272.971 91.132 467.314c-9.373 9.373-24.569 9.373-33.941.0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941.0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg>
<select class=language-select aria-label="Select Language" id=language-select-desktop onchange="location=this.value"><option value=/posts/my-experience-of-nixos/>Simplified Chinese</option><option value=/en/posts/my-experience-of-nixos/ selected>English</option></select>
</button><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<button class="search-button search-toggle" id=search-toggle-desktop title=Search>
<svg class="icon" viewBox="0 0 512 512"><path d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</button>
<button class="search-button search-clear" id=search-clear-desktop title=Clear>
<svg class="icon" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3.0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3.0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3.0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3.0 17L312 256l65.6 65.1z"/></svg>
</button>
<span class="search-button search-loading tw-animate-spin" id=search-loading-desktop><svg class="icon" viewBox="0 0 512 512"><path d="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49.0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156.0c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"/></svg>
</span></span><button class="menu-item theme-switch" aria-label="Switch Theme">
<svg class="icon" viewBox="0 0 512 512"><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705.0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/></svg></button></div></div></div></header><header class="mobile print:!tw-hidden" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/en/ title="This Cute World"><span id=mobile-header-typeit class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<button class="search-button search-toggle tw-h-10" id=search-toggle-mobile title=Search>
<svg class="icon" viewBox="0 0 512 512"><path d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</button>
<button class="search-button search-clear tw-h-fit" id=search-clear-mobile title=Clear>
<svg class="icon" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3.0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3.0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3.0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3.0 17L312 256l65.6 65.1z"/></svg>
</button>
<span class="search-button search-loading tw-animate-spin" id=search-loading-mobile><svg class="icon" viewBox="0 0 512 512"><path d="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49.0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156.0c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"/></svg></span></div><button class=search-cancel id=search-cancel-mobile>
Cancel</button></div><a class=menu-item href=/en/series/ title>Series</a><a class=menu-item href=/en/posts/ title>Posts</a><a class=menu-item href=/en/categories/tech/ title>Tech</a><a class=menu-item href=/en/categories/life/ title>Life</a><a class=menu-item href=/en/tags/ title>Tags</a><a class=menu-item href=/en/now/ title>Now</a><a class=menu-item href=/en/about/ title>About</a><button class="menu-item theme-switch tw-w-full" aria-label="Switch Theme">
<svg class="icon" viewBox="0 0 512 512"><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705.0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/></svg>
</button><button class="menu-item tw-w-full" title>English<svg class="icon" viewBox="0 0 320 512"><path d="M285.476 272.971 91.132 467.314c-9.373 9.373-24.569 9.373-33.941.0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941.0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg>
<select class=language-select title onchange="location=this.value"><option value=/posts/my-experience-of-nixos/>Simplified Chinese</option><option value=/en/posts/my-experience-of-nixos/ selected>English</option></select></button></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class="tw-mx-4 tw-flex-1"><div class="toc print:!tw-hidden" id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#nixpkgs-has-too-few-packages>Nixpkgs Has Too Few Packages?</a></li><li><a href=#is-nixos-worth-learning>Is NixOS Worth Learning?</a></li><li><a href=#the-declarative-configuration-of-nixos---os-as-code>The Declarative Configuration of NixOS - OS as Code</a></li><li><a href=#the-learning-curve-of-nixos>The Learning Curve of NixOS</a></li><li><a href=#what-sets-nixos-apart>What Sets NixOS Apart?</a></li><li><a href=#nixos-disadvantages>NixOS&rsquo;s Disadvantages and Historical Debts</a></li><li><a href=#the-future-of-nixos>The Future of NixOS</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><dialog id=toc-dialog class="tw-max-w-full tw-w-full tw-max-h-full tw-h-full tw-ml-16"><div class="toc tw-mx-4 tw-max-w-full"><h2 class="tw-mx-0 tw-my-6 tw-uppercase tw-text-2xl">Contents</h2><div class=toc-content><nav id=TableOfContents><ul><li><a href=#nixpkgs-has-too-few-packages>Nixpkgs Has Too Few Packages?</a></li><li><a href=#is-nixos-worth-learning>Is NixOS Worth Learning?</a></li><li><a href=#the-declarative-configuration-of-nixos---os-as-code>The Declarative Configuration of NixOS - OS as Code</a></li><li><a href=#the-learning-curve-of-nixos>The Learning Curve of NixOS</a></li><li><a href=#what-sets-nixos-apart>What Sets NixOS Apart?</a></li><li><a href=#nixos-disadvantages>NixOS&rsquo;s Disadvantages and Historical Debts</a></li><li><a href=#the-future-of-nixos>The Future of NixOS</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></dialog><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single print:!tw-w-full print:!tw-max-w-none print:!tw-m-0 print:!tw-p-0"><h1 class=single-title data-pagefind-meta=date:2024-02-21 data-pagefind-body>OS as Code - My Experience of NixOS</h1><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><span class=screen-reader-text></span><a href=https://thiscute.world/en/authors/ryan4yin/><img class="tw-inline-block tw-max-h-4 tw-rounded-full tw-translate-y-[-2px] tw-mr-1" src=/avatar/myself.webp alt="Ryan Yin avatar" height=16 width=16>Ryan Yin</a></span>
</span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>category <a href=/en/categories/tech/><svg class="icon" viewBox="0 0 512 512"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"/></svg>Tech</a></span>&nbsp;<span class=post-category>and</span>&nbsp;<span class=post-series>series <a href><svg class="icon" viewBox="0 0 512 512"><path d="M464 32H48C21.49 32 0 53.49.0 80v352c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zm-6 4e2H54a6 6 0 01-6-6V86a6 6 0 016-6h404a6 6 0 016 6v340a6 6 0 01-6 6zm-42-92v24c0 6.627-5.373 12-12 12H204c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h2e2c6.627.0 12 5.373 12 12zm0-96v24c0 6.627-5.373 12-12 12H204c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h2e2c6.627.0 12 5.373 12 12zm0-96v24c0 6.627-5.373 12-12 12H204c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h2e2c6.627.0 12 5.373 12 12zm-252 12c0 19.882-16.118 36-36 36s-36-16.118-36-36 16.118-36 36-36 36 16.118 36 36zm0 96c0 19.882-16.118 36-36 36s-36-16.118-36-36 16.118-36 36-36 36 16.118 36 36zm0 96c0 19.882-16.118 36-36 36s-36-16.118-36-36 16.118-36 36-36 36 16.118 36 36z"/></svg></a></span></div><div class=post-meta-line><svg class="icon" viewBox="0 0 448 512"><path d="M148 288h-40c-6.6.0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h48c26.5.0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3.0 6-2.7 6-6z"/></svg>&nbsp;<time datetime=2024-02-21>2024-02-21</time>&nbsp;<svg class="icon" viewBox="0 0 576 512"><path d="M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1.0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7.0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174 402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7-43.2-43.2c-4.1-4.1-10.8-4.1-14.8.0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"/></svg>&nbsp;<time datetime=2024-02-21>2024-02-21</time>&nbsp;<svg class="icon" viewBox="0 0 512 512"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3.0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9.0l60.1 60.1c18.8 18.7 18.8 49.1.0 67.9zM284.2 99.8 21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3.0-17l-111-111c-4.8-4.7-12.4-4.7-17.1.0zM124.1 339.9c-5.5-5.5-5.5-14.3.0-19.8l154-154c5.5-5.5 14.3-5.5 19.8.0s5.5 14.3.0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8.0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;4005 words&nbsp;
<svg class="icon" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5.0-2e2-89.5-2e2-2e2S145.5 56 256 56s2e2 89.5 2e2 2e2-89.5 2e2-2e2 2e2zm61.8-104.4-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6.0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;18 minutes&nbsp;</div></div><div class=featured-image><img loading=eager src=/posts/my-experience-of-nixos/nixos-and-flakes-book-202402.webp height=1216 width=2614></div><div class="details series-nav open"><div class="details-summary series-title"><span>Series - NixOS & Nix Flakes</span>
<span class=details-icon><svg class="icon" viewBox="0 0 256 512"><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9.0l-22.6-22.6c-9.4-9.4-9.4-24.6.0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6.0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9.0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg></span></div><div class="details-content series-content"><nav><ul><li><span class=active>OS as Code - My Experience of NixOS</span></li><li><a href=/en/posts/nixos-and-flake-basics/>NixOS & Nix Flakes - A Guide for Beginners</a></li></ul></nav></div></div><div class="details toc print:!tw-block" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span class=details-icon><svg class="icon" viewBox="0 0 256 512"><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9.0l-22.6-22.6c-9.4-9.4-9.4-24.6.0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6.0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9.0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#nixpkgs-has-too-few-packages>Nixpkgs Has Too Few Packages?</a></li><li><a href=#is-nixos-worth-learning>Is NixOS Worth Learning?</a></li><li><a href=#the-declarative-configuration-of-nixos---os-as-code>The Declarative Configuration of NixOS - OS as Code</a></li><li><a href=#the-learning-curve-of-nixos>The Learning Curve of NixOS</a></li><li><a href=#what-sets-nixos-apart>What Sets NixOS Apart?</a></li><li><a href=#nixos-disadvantages>NixOS&rsquo;s Disadvantages and Historical Debts</a></li><li><a href=#the-future-of-nixos>The Future of NixOS</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=content id=content data-pagefind-body><p>It&rsquo;s February 2024, exactly 10 months since I started using NixOS. The beginner notes I
wrote initially have received a lot of positive feedback and some sponsorships, becoming
one of the most popular entry-level tutorials in the entire community. Since I created a
dedicated GitHub repository and a separate documentation site for it in June 2023, it has
garnered 1189 stars, and besides me, 37 other readers have submitted PRs:</p><ul><li><a href=https://nixos-and-flakes.thiscute.world/zh/ target=_blank rel="noopener noreferrer">NixOS & Flakes - An Unofficial Beginner&rsquo;s Guide</a></li></ul><figure><img src=/images/my-experience-of-nixos/nixos-and-flakes-book-202402.webp width=80%><figcaption><h4>NixOS & Flakes Book</h4></figcaption></figure><p>From the perspective of a seasoned user who has been deeply using NixOS as a primary
desktop system for nearly 10 months, I&rsquo;d like to share my insights from a different angle
here.</p><p>Note that this article is not a NixOS beginner&rsquo;s tutorial; if you&rsquo;re looking for one,
please follow the link provided above.</p><h2 id=nixpkgs-has-too-few-packages class=headerLink><a href=#nixpkgs-has-too-few-packages class=header-mark></a>Nixpkgs Has Too Few Packages?</h2><p>Some people(in China) say that NixOS has too few packages, and this is one of the reasons
they don&rsquo;t use it. Is this true?</p><p>To clarify, NixOS boasts a substantial number of packages. The<a href="https://link.zhihu.com/?target=https%3A//repology.org/repositories/statistics/total" target=_blank rel="noopener noreferrer">Repository statistics</a>
illustrate this as follows:</p><p><img class=tw-inline loading=lazy src=/images/my-experience-of-nixos/repository-statistics.webp alt="Repository statistics"></p><p>The count of packages in Nixpkgs is indeed inflated by the inclusion of many programming
language libraries — it seems that quite a few Haskell developers use Nix as their
language package manager. For instance, there are<a href="https://search.nixos.org/packages?channel=unstable&amp;query=haskell" target=_blank rel="noopener noreferrer">Haskell Packages(18000+)</a>,<a href="https://search.nixos.org/packages?channel=unstable&amp;query=rpackages" target=_blank rel="noopener noreferrer">R Packages(27000+)</a>,
and<a href="https://search.nixos.org/packages?channel=unstable&amp;query=emacspackages" target=_blank rel="noopener noreferrer">Emacs Packages(6000+)</a>.
However, even after subtracting these, Nixpkgs still has over 40000 packages, which,
although less than AUR, is hardly a number that corresponds to the description of &ldquo;too few
packages.&rdquo;</p><p>The package repository is also a point of differentiation between NixOS and Arch. Arch&rsquo;s
official repository has stringent inclusion criteria, while the AUR ecosystem is quite
vibrant. The AUR allows anyone to upload content, and although a voting mechanism serves
as a form of review, it feels rather lenient.</p><p>NixOS takes a different approach. Its official package repository, Nixpkgs, is very
receptive to new packages. Submitting a Pull Request to add a package or feature to
Nixpkgs is significantly simpler compared to other distributions, which is a key reason
for the large number of packages in Nixpkgs (GitHub shows that Nixpkgs has over 5000
contributors, an impressive figure).</p><p>The update process for the Nixpkgs repository is also more rigorous than that of AUR. PRs
generally need to pass a series of GitHub Actions, Maintainer&rsquo;s Review, and<a href=https://github.com/NixOS/ofborg target=_blank rel="noopener noreferrer">Ofborg</a> check and automatic build tests before being
merged. Nixpkgs encourages maintainers to add tests for their packages (the <code>doCheck</code> flag
is set to <code>true</code> by default), all of which contribute to the overall quality of the
packages.</p><p>NixOS also has a counterpart to AUR, the NUR (Nix User Repository), but due to the
permissive nature of Nixpkgs, NUR is not as populated.</p><p>For example, you can directly download and use QQ(an IM App popular in China) from the
Nixpkgs official package repository, while on Arch, you would need to use AUR or
archlinux-cn.</p><p>This can be seen as having its own advantages. NixOS is criticized for having too few
packages mainly because it does not follow the FHS standard, which means that most Linux
programs downloaded online cannot run directly on NixOS. Of course, there are solutions to
this. I suggest first checking if there is already a package for the desired software in
Nixpkgs, and if so, use it directly. If not, try some community solutions or package it
yourself.</p><p>Packaging programs is inevitable when using NixOS, as even though Nixpkgs already has a
vast number of packages, it&rsquo;s impossible for it to match all your needs 100% of the time.
There will always be packages you want to use but can&rsquo;t find in Nixpkgs or NUR, and on
NixOS, you often have to write a packaging script for your packages to run normally on the
system.</p><p>OK, enough chatter. Let&rsquo;s move on to the main topic.</p><p>Firstly, NixOS is much more complex than traditional distributions and has a lot of
historical issues.</p><p>For example, the official documentation is so bad that it forced me, a beginner at NixOS,
to write my own beginner&rsquo;s notes while I was learning. After translating my notes into
poor English and posting them on reddit
(<a href=https://www.reddit.com/r/NixOS/comments/13dxw9d/nixos_nix_flakes_a_guide_for_beginners/ target=_blank rel="noopener noreferrer">NixOS & Nix Flakes - A Guide for Beginners</a>),
they received a lot of positive feedback from foreigners (after so much continuous
iteration, it has now become one of the most popular beginner tutorials in the community),
which also shows how bad the official documentation is.</p><h2 id=is-nixos-worth-learning class=headerLink><a href=#is-nixos-worth-learning class=header-mark></a>Is NixOS Worth Learning?</h2><p><strong>Is NixOS worth learning, or is the return on investment high enough? In my view, it all
comes down to scale.</strong></p><p><strong>Here, &ldquo;scale&rdquo; refers to three aspects:</strong></p><ol><li><strong>The scale of your custom content for the Linux system:</strong> The more customization you
do, the harder it is to migrate to a new version.</li><li><strong>The frequency of system updates:</strong> The more frequently you update your system, the
higher the risk of encountering issues.</li><li><strong>The number of your Linux machines:</strong> The more machines you have, the more you benefit
from a system that can easily replicate the same environment.</li></ol><p>Let me share my experience with traditional distributions like Arch and Ubuntu, and why I
chose NixOS, and the changes it brought me, from a personal perspective.</p><p>For example, when I used Deepin, Ubuntu and other traditional distros in the past, I
didn&rsquo;t customize the system much for fear of causing problems and not being able to fix
them easily. Moreover, any customizations I made were black boxes and not migratable. A
month later, I would have forgotten everything, and the system would have become
increasingly chaotic and opaque over time.</p><p>If you&rsquo;re using a rolling release distribution like Arch, the issues you encounter are
generally minor. But with Ubuntu or Deepin, it&rsquo;s rare for in-place upgrades to go
smoothly, which means I had to re-customize everything on the new Ubuntu version. Worse
yet, I might have forgotten what I did in the past, meaning I had to spend more time
researching my system environment and how everything was installed and configured. This
repetitive labor is very painful.</p><p>Clearly, the more complex and customized the system, the harder it is to migrate to a new
version.</p><p>I think this is why rolling release distributions like Arch, Gentoo, and Fedora are so
popular among Linux enthusiasts. Linux users who like to customize their systems mostly
use these types of distributions.</p><p>So can Arch or Fedora solve the problems completely? Obviously not.</p><p>Firstly, they have a higher update frequency, which means you&rsquo;re more likely to break
something on your system. Of course, this is a small problem, as most Linux users now use
btrfs or zfs file system snapshots for rollback in case of issues.</p><p>Their fundamental problems, however, is:</p><ol><li>Your Arch system environment, file system snapshots, or virtual machine snapshots are
still black boxes. They will become increasingly chaotic with continuous use and do not
include the &ldquo;knowledge&rdquo; of how to build this environment from scratch, making them<strong>unexplainable.</strong><ul><li>In my work, I&rsquo;ve seen some &ldquo;<strong>ancestral virtual machine snapshots</strong>&rdquo; or &ldquo;<strong>ancestral
cloud server snapshots</strong>&rdquo; where no one knows how the environment was set up, and each
new person who takes over can only continue to pile on buffs, then pass the time bomb
to the next person. This is like the game where people take turns adding water to a
cup, and whoever adds water when it overflows is out of luck.</li></ul></li><li>Arch essentially requires you to follow its updates continuously, which means you must
continuously maintain it.<ul><li>If you let a machine run stable for a year and then decide to update it, the risk of
problems is quite high. If you then decide to set up a new Arch machine and restore
the old environment, you&rsquo;re back to the same problem — you have to figure out how to
restore your customization process from the old environment, which is also not a
pleasant task.</li></ul></li><li>Snapshots are strongly associated with the current hardware environment and are easily
affected by various strange issues when used directly on different hardware machines,
making them <strong>unmovable.</strong></li><li>Snapshots are large binary files, making them expensive to back up and share.</li></ol><p>Docker can solve some of these problems. Firstly, Docker container images can be fully
described by Dockerfiles, meaning they are <strong>explainable</strong>, and the same environment can
be replicated in different environments. This indicates that they are <strong>movable.</strong></p><p>For server environments, running all applications in containers, with the host machine
only responsible for running containers, greatly reduces the cost of system maintenance by
only requiring you to maintain the most basic system environment and some Dockerfiles and
yaml files and is thus the preferred choice for DevOps.</p><p>However, Docker container technology is designed for providing a consistent runtime
environment for applications and is not suitable for virtual machine and desktop
environments (of course, you can use it in these scenarios if you wish, but it would be
quite complicated). Additionally, Dockerfiles still rely on various scripts and commands
you write to build the image, which you need to maintain, and the reproducibility of the
results depends on your own skills.</p><p>If you choose a minimalist strategy - customizing as little as possible on any desktop
system or virtual machine environment and using default settings wherever possible, this
was me before switching to NixOS.</p><p>To reduce the difficulty of system maintenance, I barely made any significant changes to
the systems I used, such as Deepin, Manjaro, EndeavourOS, etc. As an SRE/DevOps, I had
already encountered enough environmental problem pitfalls in my work and was tired of
writing various installation scripts and Ansible configurations, so I had no desire to
deal with these issues in my spare time.</p><p>However, if you are a geek who likes to customize and delve into the details of the
system, as you make more and more customizations and the system becomes more complex, or
if you have more and more Linux machines in your Homelab and cloud environment, you will
definitely start to write various deployment flow documents, deployment scripts, or use
some automation tools to help yourself complete some tedious work at some point.</p><p>Documentation aside, it&rsquo;s obvious that writing automation scripts or choosing automation
tools will lead to increasingly complex configurations, and system updates often break
some of these functions, requiring you to fix them manually. Moreover, they are highly
dependent on your current system environment, so when you confidently use them to deploy
environments on new machines, you are very likely to encounter various inconsistent
environment-related errors that need to be resolved manually. Another point is that the
scripts you write are likely not to have carefully considered abstraction, modularization,
error handling, and other aspects, which will also make it increasingly painful to
maintain them as the scale expands.</p><p>Then you discover NixOS, and you realize that its declarative configuration essentially
wraps a pile of bash scripts and provides users with a set of clean and simple APIs. The
actual work it does is exactly the same as the pile of scripts you&rsquo;ve been writing for
years.</p><p>You try it out and find that the system customization scripts in NixOS are all stored in a
repository called Nixpkgs, maintained by thousands of people, with decades of
accumulation, and with a very rich and relatively stable declarative abstraction, module
system, type system, a large-scale CI system called Hydra specifically developed for this
huge software package repository and NixOS system configuration, and a community operation
mode that has formed to facilitate collaboration and updating this complex configuration
for thousands of people.</p><p>You immediately start learning Nix and begin to rewrite the scripts you&rsquo;ve maintained for
N years into NixOS configurations.</p><p>The more you write, the more satisfied you become, as the reduced configuration is much
easier to maintain.</p><p>A large part of the functionality previously achieved with various scripts and tools is
now encapsulated in Nixpkgs, and you can enable it and pass a few key parameters to run it
painlessly. The scripts in Nixpkgs have dedicated maintainers who update and fix any
issues found by users, and any updates that haven&rsquo;t undergone CI and multiple stages of
testing and validation, such as staging and unstable, won&rsquo;t enter the stable channel.</p><p>The &ldquo;you&rdquo; I mentioned earlier is none other than myself.</p><p>Now, when I think back to the days when I struggled with systemd to run a simple little
tool, I can&rsquo;t help but shed tears&mldr; If only I had known about NixOS earlier&mldr;</p><h2 id=the-declarative-configuration-of-nixos---os-as-code class=headerLink><a href=#the-declarative-configuration-of-nixos---os-as-code class=header-mark></a>The Declarative Configuration of NixOS - OS as Code</h2><p>People with some programming experience should know the importance of abstraction and
modularization, as the complexity of a scenario increases, the benefits of abstraction and
modularization also increase. The popularity of Terraform, Kubernetes, and even Spring
Boot, reflects this. NixOS&rsquo;s declarative configuration is also like this, as it
encapsulates the underlying implementation details and has a community responsible for
updating and maintaining these lower-level encapsulations. This greatly reduces my
cognitive load and frees up my productivity. Its reproducibility also alleviates my
concerns about breaking the system.</p><p>NixOS is built on top of Nix, a functional package manager, drawing its design philosophy
from Eelco Dolstra&rsquo;s paper <a href=https://edolstra.github.io/pubs/phd-thesis.pdf target=_blank rel="noopener noreferrer">The Purely Functional Software Deployment Model</a>. &ldquo;Purely
functional&rdquo; means it has no side effects, much like a mathematical function $y = f(x)$,
where the same NixOS configuration file (input parameter $x$) always yields the same NixOS
system environment (output $y$).</p><p>This means that <strong>NixOS&rsquo;s configuration declares the entire system&rsquo;s state, OS as Code</strong>!</p><p>As long as you have the source code of your NixOS system and it hasn&rsquo;t been lost,
modifying it, reviewing it, sharing the source code with others, or borrowing features
from someone else&rsquo;s source code is quite straightforward.</p><p>You can easily copy other NixOS users&rsquo; system configurations to ensure you&rsquo;ll get the same
environment. In contrast, copying configurations from users of traditional distributions
like Arch or Ubuntu is much more cumbersome, considering the various version differences
and environmental peculiarities, leading to a high level of uncertainty.</p><h2 id=the-learning-curve-of-nixos class=headerLink><a href=#the-learning-curve-of-nixos class=header-mark></a>The Learning Curve of NixOS</h2><p>The entry barrier of NixOS is relatively high and is not suitable for beginners who have
never touched Linux and programming. This is because its design philosophy is quite
different from traditional Linux distributions. However, this is also its advantage, as
once you cross that threshold, you will find a whole new world.</p><p>For example, <strong>reading the source code of Nixpkgs and submitting PRs to add features， add
packages or fix bugs is a basic skill for NixOS users</strong>, and <strong>NixOS users who do this are
quite common</strong>. <strong>This is both a deterrent that scares away new users and a ladder for
Linux users who have chosen NixOS</strong>.</p><p>Imagine that most Arch users (like me in the past) might have used Arch for several years
but didn&rsquo;t understand the underlying implementation details of Arch, nor did they package
their own software. But with NixOS, diving into the source code becomes a norm, which also
shows that understanding its implementation details is not difficult.</p><p>I will illustrate this point from two aspects.</p><p>First, Nix is a relatively simple language with very few syntax rules, <strong>far simpler than
general-purpose languages like Java or Python</strong>. Therefore, engineers with some
programming experience can master its syntax in just a few hours. With a bit more time,
reading common Nix code shouldn&rsquo;t be too difficult.</p><p>Second, <strong>NixOS&rsquo;s good declarative abstraction and modularization system divide the OS
into many layers</strong>, allowing users to focus only on the current layer of abstraction while
still having the option to dive deeper into the next layer to more freely implement the
desired functions (The right to choose, in fact, also gives users the opportunity to
understand NixOS progressively.). For example, new users can normally use NixOS just by
understanding the top-level abstraction. When you want to implement some customizations,
digging one level deeper into the abstraction (such as customizing some operations
directly through systemd&rsquo;s declarative parameters) is usually enough. If you are already a
seasoned NixOS user and want to be more geeky, you can continue to delve deeper.</p><p>In summary, understanding the source code in Nixpkgs or using Nix to package a few
programs is not difficult, and each NixOS user with some experience can also be a NixOS
packager.</p><h2 id=what-sets-nixos-apart class=headerLink><a href=#what-sets-nixos-apart class=header-mark></a>What Sets NixOS Apart?</h2><p>We&rsquo;ve heard a lot about NixOS&rsquo;s strengths, and I&rsquo;ve mentioned many of them above.</p><p>People outside the Nix community might mainly hear about its dependency-conflicts-free,
the ability to roll back at any time, and its powerful reproducibility.</p><p>If you have actually used NixOS, you should also know about its other advantages:</p><ol><li><p>NixOS&rsquo;s flakes feature allows you to lock the system to a specific state, and you can
update it when you want to, even if it spans a year or two. NixOS does not force you to
update your system frequently, you can choose to do this or not at all. Because the
state of the system can be completely inferred from your NixOS configuration, it&rsquo;s much
easier to upgrade from a old version to the latest one.</p><ol><li>It&rsquo;s always good to have a choice, I don&rsquo;t like being forced, and neither do
sysadmins or DevOps in companies.</li></ol></li><li><p>System updates have similar atomic properties to database transactions, which means
your system updates either succeed or fail (usually without intermediate states).</p></li><li><p>NixOS&rsquo;s declarative configuration actually implements OS as Code, making these
configurations very easy to share. You can simply copy the code for the desired
functionality from other NixOS users into your system configuration, and you&rsquo;ll get an
identical environment. Beginner users can also easily learn a lot from others'
configurations.</p><ol><li>This is also why more and more users are using NixOS for Linux desktop ricing on
GitHub and reddit r/unixporn in recent years.</li></ol></li><li><p>The declarative configuration provides users with highly convenient system
customization capabilities, allowing them to quickly switch various components of the
system by changing a few lines of configuration.</p></li><li><p>And so on.</p></li></ol><p>These are all selling points of NixOS, some of which can now also be achieved by
traditional distributions with innovations like Fedora Silverblue.</p><p>However, the system that can solve all these problems right now is only NixOS (and the
more niche Guix. According to<a href=https://git.savannah.gnu.org/cgit/guix.git/tree/README#n69 target=_blank rel="noopener noreferrer">Guix&rsquo;s README</a>, it&rsquo;s also
based on the Nix package manager).</p><h2 id=nixos-disadvantages class=headerLink><a href=#nixos-disadvantages class=header-mark></a>NixOS&rsquo;s Disadvantages and Historical Debts</h2><p>For over two decades since the creation of the NixOS project, Nix package manager and the
NixOS operating system have been very niche technologies, especially in China, where only
a few Linux enthusiasts are aware of their existence, let alone using them.</p><p>NixOS is very special and powerful, but on the other hand, it has a considerable amount of
historical debt, such as:</p><ol><li>Poorly organized and impenetrable documentation</li><li>The Flakes feature, which truly enables NixOS to meet its claimed reproducibility, is
still in an experimental state from its official release in 2021(Nix 2.4) to 2024 now..</li><li>The Nix CLI is in a transition period, and the new version is much more elegant, but
its implementation is strongly bound to the Flakes feature, making both difficult to
stabilize and even hindering the development of many other features.</li><li>Defects in the module system and insufficient error handling in Nix have led to
long-term cryptic error messages, driving users crazy.</li><li>The Nix language&rsquo;s simplicity has resulted in a large number of Bash scripts being used
in Nixpkgs, and most of Nix&rsquo;s features are implemented in C++, making it a black box
from the perspective of Nix.</li><li>Many implementation details of NixOS are hidden in the Nixpkgs source code, such as the
classification of software packages and what attributes can be overridden in
derivations.<ul><li>Nixpkgs has long used folders to classify software packages, and there is no way to
query the software packages by category except through the source code.</li><li>All derivation-related information in Nixpkgs can currently only be obtained by
looking at the source code.</li></ul></li><li>The maintainer of the <a href=https://nixos.wiki target=_blank rel="noopener noreferrer">https://nixos.wiki</a> site has left, and the official has long
failed to provide an alternative, making NixOS&rsquo;s documentation even worse than it
already was.</li><li>The recent rapid growth of Nix/NixOS&rsquo;s user base has posed challenges to its community
operation model.</li><li>&mldr;</li></ol><p>These historical debts are the main reasons why NixOS has not been more widely used. But
these issues are also opportunities for NixOS&rsquo;s future, as the community is actively
working to solve them. I am looking forward to seeing how NixOS will develop once these
issues are resolved.</p><h2 id=the-future-of-nixos class=headerLink><a href=#the-future-of-nixos class=header-mark></a>The Future of NixOS</h2><p>No one is interested in a technology that has no future, so what about the future of
NixOS? Am I optimistic about it? Here, I try to illustrate my views on the future of NixOS
using some data.</p><p>First, let&rsquo;s look at the Nixpkgs project, which stores all the software packages for NixOS
and the implementation code for NixOS itself:</p><p><a href=https://github.com/NixOS/nixpkgs/graphs/contributors target=_blank rel="noopener noreferrer"><img class=tw-inline loading=lazy src=/images/my-experience-of-nixos/nixpkgs-contributors.webp></a></p><p>The graph shows that the activity of the Nixpkgs project has been continuously increasing
since 2021. Among the Top 6 contributors, three began contributing code in large
quantities after 2021. If you look at GitHub, you&rsquo;ll see that five out of the Top 10
contributors joined the community after 2021, including seasoned NixOS-CN members @NickCao
and @figsoda.</p><p>Now let&rsquo;s look at the commit history of the Nix package manager, which is the underlying
technology of NixOS:</p><p><a href=https://github.com/NixOS/nixpkgs/graphs/contributors target=_blank rel="noopener noreferrer"><img class=tw-inline loading=lazy src=/images/my-experience-of-nixos/nix-contributors.webp></a></p><p>The graph shows a significant increase in activity in the Nix project in 2020, five of the
top 6 contributors beginning to contribute code in large quantities after 2020.</p><p>Next, let&rsquo;s look at the Google Trends for the keyword &ldquo;NixOS&rdquo;:</p><p><a href="https://trends.google.com/trends/explore?cat=5&amp;date=2014-01-23%202024-02-23&amp;q=NixOS" target=_blank rel="noopener noreferrer"><img class=tw-inline loading=lazy src=/images/my-experience-of-nixos/nixos-google-trends.webp></a></p><p>This graph shows several obvious upticks in the search trending for NixOS:</p><ol><li>In December 2021<ul><li>This is likely due to the release of Nix 2.4 in November 2021, which brought
experimental Flakes features and a new CLI. Flakes greatly improves the
reproducibility of NixOS,and the new CLI is more in line with user intuition.</li></ul></li><li>In June 2023<ul><li>The most important reason should be that several popular Linux-related channels on
YouTube launched several videos about NixOS around this time. As of 2024-02-23, the
three NixOS-related videos with the highest views on YouTube were all released
between June and July 2023, with a total view count exceeding 1.3 million.<img class=tw-inline loading=lazy src=/images/my-experience-of-nixos/nixos-youtube-videos.webp></li><li>Interest in China peaked recently, which may be because the user base in China has
always been small. Then in June, I released<a href=https://nixos-and-flakes.thiscute.world/zh/ target=_blank rel="noopener noreferrer">NixOS and Flakes - An Unofficial Beginner&rsquo;s Guide</a>,
and I did some promotion through channels like<a href=https://github.com/ruanyf/weekly/issues/3315 target=_blank rel="noopener noreferrer">Technology Lover&rsquo;s Weekly</a>, leading to
a significant increase in the relative index of NixOS.</li></ul></li><li>In January 2024<ul><li>I&rsquo;m not sure of the reason for this yet.</li></ul></li></ol><p>Now let&rsquo;s look at the annual user survey started by the Nix/NixOS community in 2022.</p><ol><li><a href=https://discourse.nixos.org/t/2022-nix-survey-results/18983 target=_blank rel="noopener noreferrer">2022 Nix Survey Results</a>,
based on the data:<ul><li>74.5% of users began using Nix/NixOS within the last three years.</li><li>In the survey about extending Nixpkgs, 36.7% of users use Flakes to extend Nixpkgs,
second only to traditional overlays.</li></ul></li><li><a href=https://discourse.nixos.org/t/nix-community-survey-2023-results/33124 target=_blank rel="noopener noreferrer">Nix Community Survey 2023 Results</a>,
a simple calculation reveals:<ul><li>54.1% of users began using Nix/NixOS within the last three years.</li><li>In the survey about extending Nixpkgs, the percentage of users using Flakes reached
49.2%, surpassing traditional Overlays.</li><li>In the survey about experimental features, the percentage of users using Flakes
reached 59.1%.</li></ul></li></ol><p>Additionally, GitHub&rsquo;s<a href=https://github.blog/2023-11-08-the-state-of-open-source-and-ai/ target=_blank rel="noopener noreferrer">Octoverse 2023</a> report
also mentioned Nixpkgs:</p><blockquote><p>Developers see benefits to combining packages and containerization. As we noted earlier,
4.3 million repositories used Docker in 2023. <strong>On the other side of the coin, Linux
distribution NixOS/nixpkgs has been on the top list of open source projects by
contributor for the last two years</strong>.</p></blockquote><p>These data points align with the increased activity in the Nixpkgs and Nix projects and
show that the Nix/NixOS community began growing rapidly after 2021.</p><p>Considering all these data points, I am very optimistic about the future of NixOS.</p><h2 id=conclusion class=headerLink><a href=#conclusion class=header-mark></a>Conclusion</h2><p>From deciding to dive into NixOS to now, just 10 months later, the gains I&rsquo;ve made on
Linux far exceed those of the past three years. I have tried a lot of new technologies and
tools on my PC, and my Homelab has become much richer (I now have more than ten NixOS
hosts). My understanding of the Linux system structure has also deepened.</p><p>These few points alone are enough to justify the choice, welcome to the world of NixOS!</p></div><h2>Related Content</h2><div class=related-container><div class=related-item-container><div class=related-image><a href=/en/posts/why-i-choose-niche-products/><img src=/posts/why-i-choose-niche-products/anime-girls-seagulls.webp height=200 width=400></a></div><h2 class=related-title><a href=/en/posts/why-i-choose-niche-products/>Why do I explore these niche technologies?</a></h2></div><div class=related-item-container><div class=related-image><a href=/en/posts/nixos-and-flake-basics/><img src=/posts/nixos-and-flake-basics/nixos-and-flakes-book.webp height=200 width=400></a></div><h2 class=related-title><a href=/en/posts/nixos-and-flake-basics/>NixOS & Nix Flakes - A Guide for Beginners</a></h2></div></div><div class="sponsor print:tw-hidden"><div class=sponsor-avatar><img src=/avatar/myself.webp></div><p class=sponsor-bio><em>If you find my creation helpful, please consider commenting, sharing & sponsoring.</em></p><a href=https://www.buymeacoffee.com/ryan4yin title=Sponsor target=_blank class=sponsor-button rel="noopener noreferrer"><span style=color:#ec6cb9><svg class="icon" viewBox="0 0 512 512"><path d="M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3.0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8.0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"/></svg></span>
<span>Sponsor</span></a></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2024-02-21</span></div><div class=post-info-license></div></div><div class="post-info-line print:!tw-hidden"><div class=post-info-md></div><div class=post-info-share><button title="Share on Twitter" data-sharer=twitter data-url=https://thiscute.world/en/posts/my-experience-of-nixos/ data-title="OS as Code - My Experience of NixOS" data-via=ryan4yin data-hashtags=NixOS,Nix,Flakes,Linux,DevOps><svg class="icon" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></button><button title="Share on Hacker News" data-sharer=hackernews data-url=https://thiscute.world/en/posts/my-experience-of-nixos/ data-title="OS as Code - My Experience of NixOS"><svg class="icon" viewBox="0 0 448 512"><path d="M0 32v448h448V32H0zm21.2 197.2H21c.1-.1.2-.3.3-.4.0.1.0.3-.1.4zm218 53.9V384h-31.4V281.3L128 128h37.3c52.5 98.3 49.2 101.2 59.3 125.6 12.3-27 5.8-24.4 60.6-125.6H320l-80.8 155.1z"/></svg></button><button title="Share on Reddit" data-sharer=reddit data-url=https://thiscute.world/en/posts/my-experience-of-nixos/><svg class="icon" viewBox="0 0 512 512"><path d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg></button><script>function shareOnMastodon(e,t){const o="share_mastodon_domain",i=localStorage.getItem(o)??"mastodon.social",n=prompt("Enter your Mastodon domain",i);if(n===null)return;localStorage.setItem(o,n);const a=e+`

`+t,s=new URL("https://"+n);s.pathname="share",s.searchParams.append("text",a),window.open(s,"_blank","width=500,height=500,left=500,toolbar=0,status=0")}</script>
<button title="Share on Mastodon" onclick='shareOnMastodon("OS as Code - My Experience of NixOS","https://thiscute.world/en/posts/my-experience-of-nixos/")'><svg class="icon" viewBox="0 0 448 512"><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg></button></div></div></div><div class=post-info-more><section class=post-tags><svg class="icon" viewBox="0 0 640 512"><path d="M497.941 225.941 286.059 14.059A48 48 0 00252.118.0H48C21.49.0.0 21.49.0 48v204.118a48 48 0 0014.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882.0l204.118-204.118c18.745-18.745 18.745-49.137.0-67.882zM112 160c-26.51.0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882.0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397.0h48.721a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882z"/></svg>&nbsp;<a href=/en/tags/nixos/>NixOS</a>,&nbsp;<a href=/en/tags/nix/>Nix</a>,&nbsp;<a href=/en/tags/flakes/>Flakes</a>,&nbsp;<a href=/en/tags/linux/>Linux</a>,&nbsp;<a href=/en/tags/devops/>DevOps</a></section><section class=print:!tw-hidden><span><button class="tw-text-fgColor-link-muted hover:tw-text-fgColor-link-muted-hover" onclick=window.history.back()>Back</button></span>&nbsp;|&nbsp;<span><a href=/en/>Home</a></span></section></div><div class="post-nav print:tw-hidden"><a href=/en/posts/why-i-choose-niche-products/ class=prev rel=prev title="Why do I explore these niche technologies?"><svg class="icon" viewBox="0 0 256 512"><path d="M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9.0l22.6 22.6c9.4 9.4 9.4 24.6.0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6.0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9.0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"/></svg>Why do I explore these niche technologies?</a>
<a href=/en/posts/kubecon-china-2024/ class=next rel=next title="KubeCon China 2024 Adventure">KubeCon China 2024 Adventure<svg class="icon" viewBox="0 0 256 512"><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9.0l-22.6-22.6c-9.4-9.4-9.4-24.6.0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6.0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9.0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg></a></div></div><div id=comments class="print:!tw-hidden tw-pt-32 tw-pb-8"><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></main><footer class=footer><div class=footer-container><div class=footer-line><a href=https://www.foreverblog.cn/ target=_blank><img src=https://foreverblog.cn/assets/logo/logo_en_default.png alt style=display:inline-block;width:auto;height:20px></a></div><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.150.0">Hugo</a>&nbsp;|&nbsp;Hosted on <a title=Cloudflare href=https://www.cloudflare.com/ target=_blank rel="noopener noreffer">Vercel</a>&nbsp;|&nbsp;Theme - <a href=https://github.com/HEIGE-PCloud/DoIt target=_blank rel="noopener noreferrer" title="DoIt 0.4.2"><svg class="icon" viewBox="0 0 576 512"><path d="M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1.0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7.0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174 402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7-43.2-43.2c-4.1-4.1-10.8-4.1-14.8.0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"/></svg> DoIt</a></div><div class=footer-line><svg class="icon" viewBox="0 0 512 512"><path d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 448c-110.532.0-2e2-89.451-2e2-2e2.0-110.531 89.451-2e2 2e2-2e2 110.532.0 2e2 89.451 2e2 2e2.0 110.532-89.451 2e2-2e2 2e2zm107.351-101.064c-9.614 9.712-45.53 41.396-104.065 41.396-82.43.0-140.484-61.425-140.484-141.567.0-79.152 60.275-139.401 139.762-139.401 55.531.0 88.738 26.62 97.593 34.779a11.965 11.965.0 011.936 15.322l-18.155 28.113c-3.841 5.95-11.966 7.282-17.499 2.921-8.595-6.776-31.814-22.538-61.708-22.538-48.303.0-77.916 35.33-77.916 80.082.0 41.589 26.888 83.692 78.277 83.692 32.657.0 56.843-19.039 65.726-27.225 5.27-4.857 13.596-4.039 17.82 1.738l19.865 27.17a11.947 11.947.0 01-1.152 15.518z"/></svg>2021 - 2026<span class=author>&nbsp;<a href=/en/ target=_blank rel="noopener noreferrer"></a></span>&nbsp;|&nbsp;<span class=license> <a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer><div class="print:!tw-hidden tw-flex tw-flex-col tw-fixed tw-right-4 tw-bottom-4 tw-gap-2"><a href=#back-to-top id=back-to-top-button class="tw-transition-opacity tw-opacity-0 tw-block tw-bg-bgColor-secondary tw-rounded-full" style=padding:.6rem;line-height:1.3rem;font-size:1rem title="Back to Top"><svg class="icon" viewBox="0 0 448 512"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg>
</a><button id=toc-drawer-button class="tw-block tw-bg-bgColor-secondary tw-rounded-full md:tw-hidden" style=padding:.6rem;line-height:1.3rem;font-size:1rem>
<svg class="icon" viewBox="0 0 448 512"><path d="M16 132h416c8.837.0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163.0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837.0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837.0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837.0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837.0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>
</button><a href=#comments id=view-comments class="tw-block tw-bg-bgColor-secondary tw-rounded-full" style=padding:.6rem;line-height:1.3rem;font-size:1rem title="View Comments">
<svg class="icon" viewBox="0 0 512 512"><path d="M256 32C114.6 32 0 125.1.0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3.0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4.0 256-93.1 256-208S397.4 32 256 32z"/></svg></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/katex/copy-tex.min.css><noscript><link rel=stylesheet href=/lib/katex/copy-tex.min.css></noscript><script>window.config={"algoliasearch.min.js":"/lib/algoliasearch/algoliasearch-lite.umd.min.js","autocomplete.min.js":"/lib/autocomplete/autocomplete.min.js",comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"",lightTheme:"github-light",repo:"ryan4yin/thiscute.world"}},data:{"desktop-header-typeit":"This Cute World","mobile-header-typeit":"This Cute World"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"747LJ10EI7",algoliaIndex:"ryan-space",algoliaSearchKey:"658db5f2bf056f83458cacf5dd58ec80",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:50,type:"algolia"},sharerjs:!0,typeit:{cursorChar:null,cursorSpeed:null,data:{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},duration:null,speed:null}}</script><script src=/lib/sharer/sharer.min.js></script><script src=/lib/typeit/typeit.min.js></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/js/katex.min.js defer></script><script src=/js/theme.min.js defer></script><script src=/js/utterances.min.js defer></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4V93QVSNFW",{anonymize_ip:!0})</script><script src="https://www.googletagmanager.com/gtag/js?id=G-4V93QVSNFW" async></script><script type=speculationrules>
  {
    "prerender": [
      {
        "where": { "href_matches": "/*" },
        "eagerness": "moderate"
      }
    ]
  }
</script></body></html>